<!DOCTYPE html>
<html>
    <head lang="pt-BR">
        <!-- Aba -->
        <title>Pesquisa</title>
        <link rel="shortcut icon" href="assets/img/folha.png" type="image/x-icon" />

        <!-- Metadados -->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <!-- BootStrap -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet">

        <!-- Styles -->
        <link rel="stylesheet" href="assets/css/style.css"></link>
        
        <!-- ChartJS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css"></link>

        <!-- Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Girassol&family=Pacifico&family=Sanchez&family=Frank+Ruhl+Libre:wght@300&display=swap" rel="stylesheet">

    </head>
    <body>
        
        <!-- Cabeçalho -->
        <div id="web-top"></div>

        <!-- Conteúdo Principal -->
        <div class="nt-m">
            <div class="container" id="conteudo">
                <div class="titulo font-sanchez" id="search-page">
                    <div class="collapse show" id="searching">
                        <h2 class="p-0">Procurando alguma coisa?</h2>
                        <p class="texto text-muted ml-4">Use nosso dispositivo de busca ou navegue nos botões acima.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rodapé -->
        <div id="web-bottom"></div>
        
        <!-- ChartJS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>

        <!-- Jquery -->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>

        <!-- BootStrap -->
        <script src="assets/js/bootstrap.min.js"></script>
        
        <!-- Scripts -->
        <script src="assets/js/index.js"></script>
        <script>

        document.getElementById("dark-switch").classList = "d-none";

        function search(inp, pages, text, nav) {

            if (inp.value) {
                let a, i, val = inp.value;

                closeAllLists()
                createSearchItems(a, i, val)
            }

            inp.addEventListener("input", function(e) {
                let a, i, val = this.value;

                if (!val) { return false;}
                closeAllLists()
                closeAllLists()
                createSearchItems(a, i, val)
            })

            function createSearchItems(a, i, val) {
                for (i = 0; i < pages.length; i++) {
                    if (pages[i].substr(0, val.length).toUpperCase() == val.toUpperCase() || nav[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                        a = document.createElement("DIV");

                        a.innerHTML = "<a href="+ nav[i] + "?inputCheck=" + document.getElementById("customSwitch1").checked +
                        "><h2 class='p-0'>" + pages[i] + "</h2></a>"+
                        "<p class='texto text-muted ml-4'>"+ text[i] +"</p>" ;

                        a.setAttribute("class", "search-item");
                        document.getElementById("search-page").appendChild(a);
                    }
                }
                
                if (document.getElementsByClassName("search-item").length == 0) {
                    document.getElementById("searching").classList.add("show");
                } else {
                    document.getElementById("searching").classList.remove("show");
                }
            }

            function closeAllLists(elmnt) {
                var x = document.getElementsByClassName("search-item");
                for (var i = 0; i < x.length; i++) {
                    if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                    }
                }
            }
            }

            let pages = ["Home", "Notícias", "Brumadinho", "Quem Somos?"]
            let nav = ["index.html", "noticias.html",  "noticias02.html", "sobre.html"]
            let text = [
            "Venha visitar nossa página inicial",
            "As últimas notícias sobre a Indústria e o Desenvolvimento Sustentável",
            "Os impactos do rompimento da Barragem de Brumadinho",
            "Um pouco da nossa história",
            ]

            queryString("inputValue") != undefined ? document.getElementById("input").value = queryString("inputValue") : ""

            search(document.getElementById("input"), pages, text, nav);
        </script>

    </body>
</html>